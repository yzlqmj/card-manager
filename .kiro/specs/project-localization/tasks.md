# 实施计划: 项目本地化改进

## 概述

将现有的Go语言卡片管理项目进行全面的中文本地化改进，包括配置文件格式从JSON迁移到YAML、配置字段中文化、移除冗余配置项、以及代码注释的完全中文化。

## 任务

- [x] 1. 设置YAML支持和依赖管理
  - 添加YAML解析库依赖到go.mod
  - 验证依赖安装正确
  - _需求: 1.1, 6.1_

- [x] 2. 实现配置系统核心组件
  - [x] 2.1 创建支持中文字段的配置结构体
    - 更新Config结构体，添加YAML标签支持中文字段名
    - 更新LocalizerConfig结构体
    - _需求: 2.1, 2.2_

  - [ ]* 2.2 为配置结构体编写属性测试
    - **属性 4: 字段映射正确性**
    - **验证需求: 2.1, 5.2**

  - [x] 2.3 实现YAML配置加载器
    - 创建LoadFromYAML函数替代现有的JSON加载
    - 实现配置验证逻辑
    - _需求: 1.1, 1.2_

  - [ ]* 2.4 为YAML加载器编写属性测试
    - **属性 1: YAML配置加载**
    - **属性 2: 中文注释处理**
    - **验证需求: 1.1, 1.2, 6.1**

- [x] 3. 移除nikoPath配置并实现动态路径构建
  - [x] 3.1 创建路径构建器组件
    - 实现PathBuilder结构体和BuildNikoPath方法
    - 移除Config结构体中的NikoPath字段
    - _需求: 3.1, 3.2_

  - [ ]* 3.2 为路径构建器编写属性测试
    - **属性 5: nikoPath字段排除**
    - **属性 6: 动态路径构建**
    - **验证需求: 3.1, 3.2**

  - [x] 3.3 更新所有使用nikoPath的代码
    - 查找并更新所有引用cfg.NikoPath的代码
    - 替换为动态路径构建调用
    - _需求: 3.2_

- [x] 4. 创建YAML配置文件
  - [x] 4.1 创建主配置YAML文件
    - 将config/config.json转换为config/config.yaml
    - 添加详细的中文注释说明
    - _需求: 1.3, 2.2_

  - [x] 4.2 创建localizer配置YAML文件
    - 将localizer/config.json转换为localizer/config.yaml
    - 添加中文字段名和注释
    - _需求: 6.1, 6.2_

- [x] 5. 实现错误处理和中文化
  - [x] 5.1 添加中文错误信息处理
    - 实现配置加载错误的中文提示
    - 添加路径验证错误的中文信息
    - _需求: 1.4_

  - [ ]* 5.2 为错误处理编写属性测试
    - **属性 3: 中文错误信息**
    - **验证需求: 1.3**

- [x] 6. 检查点 - 确保配置系统正常工作
  - 确保所有测试通过，如有问题请询问用户

- [x] 7. 代码注释全面中文化
  - [x] 7.1 中文化config包的注释
    - 将internal/config/config.go中的所有英文注释改为中文
    - 添加更详细的中文函数和结构体说明
    - _需求: 4.1, 4.2, 4.3, 4.4_

  - [x] 7.2 中文化app包的注释
    - 将internal/app/app.go中的注释完全中文化
    - 添加详细的中文说明
    - _需求: 4.1, 4.2, 4.3, 4.4_

  - [x] 7.3 中文化handlers包的注释
    - 更新internal/handlers/目录下所有文件的注释
    - 确保所有函数都有清晰的中文说明
    - _需求: 4.1, 4.2, 4.3, 4.4_

  - [x] 7.4 中文化其他核心包的注释
    - 更新internal/models/、internal/pkg/等包的注释
    - 确保main.go和cmd/cli/main.go的注释完全中文化
    - _需求: 4.1, 4.2, 4.3, 4.4_

- [x] 8. localizer工具同步更新
  - [x] 8.1 更新localizer的配置加载逻辑
    - 修改localizer/config.go以支持YAML格式
    - 更新字段映射以支持中文字段名
    - _需求: 6.1, 6.2_

  - [x] 8.2 中文化localizer工具的注释
    - 将localizer/目录下所有Go文件的注释改为中文
    - 添加详细的中文说明
    - _需求: 4.1, 4.2, 4.3, 4.4_

- [x] 9. 兼容性测试和验证
  - [x] 9.1 实现兼容性验证
    - 验证所有现有功能在配置改变后正常工作
    - 测试关键API端点的功能完整性
    - _需求: 5.1, 5.2_

  - [ ]* 9.2 为兼容性编写属性测试
    - **属性 7: 配置兼容性**
    - **验证需求: 5.1**

- [x] 10. 清理和文档更新
  - [x] 10.1 删除旧的JSON配置文件
    - 删除config/config.json和localizer/config.json
    - 确认没有代码仍然引用这些文件
    - _需求: 1.1, 6.1_

  - [x] 10.2 更新README和相关文档
    - 更新README.md中的配置说明
    - 添加YAML配置文件的使用说明
    - _需求: 1.3_

- [x] 11. 最终检查点 - 确保所有测试通过
  - 确保所有测试通过，如有问题请询问用户

## 注意事项

- 标记为 `*` 的任务是可选的，可以跳过以实现更快的MVP
- 每个任务都引用了具体的需求以确保可追溯性
- 检查点确保增量验证
- 属性测试验证通用正确性属性
- 单元测试验证特定示例和边界情况