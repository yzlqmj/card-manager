# 项目本地化改进需求文档

## 简介

对现有的Go语言卡片管理项目进行全面的中文本地化改进，包括配置文件格式优化、字段名称中文化、以及代码注释的完全中文化。

## 术语表

- **项目**: 当前的Go语言卡片管理应用程序
- **配置系统**: 负责加载和管理应用配置的模块
- **本地化**: 将英文内容转换为中文的过程
- **YAML**: 人类可读的数据序列化标准
- **酒馆**: SillyTavern应用程序的中文称呼

## 需求

### 需求 1: 配置文件格式优化

**用户故事:** 作为中文用户，我希望配置文件使用YAML格式并支持中文注释，这样我可以更容易地理解和修改配置。

#### 验收标准

1. WHEN 应用启动时 THEN 配置系统 SHALL 从YAML文件加载配置而不是JSON文件
2. WHEN 配置文件包含中文注释时 THEN 配置系统 SHALL 正确解析配置内容
3. WHEN 用户查看配置文件时 THEN 配置文件 SHALL 包含详细的中文说明注释
4. WHEN 配置加载失败时 THEN 配置系统 SHALL 提供清晰的中文错误信息

### 需求 2: 配置字段中文化

**用户故事:** 作为中文用户，我希望配置字段使用中文名称，这样我可以直观地理解每个配置项的作用。

#### 验收标准

1. WHEN 配置文件被读取时 THEN 配置系统 SHALL 使用中文字段名称映射到内部结构
2. WHEN 用户编辑配置时 THEN 配置文件 SHALL 显示中文字段名称
3. THE 配置系统 SHALL 支持以下字段映射：
   - charactersRootPath → 角色卡根目录
   - tavernCharactersPath → 酒馆角色卡目录
   - tavernPublicPath → 酒馆公共目录
   - port → 端口
   - proxy → 代理地址

### 需求 3: 移除冗余配置

**用户故事:** 作为系统维护者，我希望移除不必要的配置项，这样配置文件更简洁且不会产生混淆。

#### 验收标准

1. WHEN 配置文件被加载时 THEN 配置系统 SHALL NOT 包含nikoPath字段
2. WHEN 需要访问niko目录时 THEN 应用程序 SHALL 基于酒馆公共目录动态构建路径
3. WHEN 移除nikoPath后 THEN 所有相关功能 SHALL 继续正常工作

### 需求 4: 代码注释全面中文化

**用户故事:** 作为中文开发者，我希望所有代码注释都是中文的，这样我可以更好地理解和维护代码。

#### 验收标准

1. THE 项目 SHALL 将所有英文注释替换为详细的中文注释
2. WHEN 查看任何Go源文件时 THEN 文件 SHALL 只包含中文注释
3. WHEN 查看函数定义时 THEN 每个函数 SHALL 有详细的中文说明注释
4. WHEN 查看结构体定义时 THEN 每个结构体和字段 SHALL 有清晰的中文注释
5. WHEN 查看复杂逻辑时 THEN 代码 SHALL 包含解释性的中文注释

### 需求 5: 配置系统兼容性

**用户故事:** 作为用户，我希望配置系统的改动不会影响现有功能，这样我可以平滑地升级到新版本。

#### 验收标准

1. WHEN 配置格式改变后 THEN 所有现有功能 SHALL 继续正常工作
2. WHEN 字段名称改变后 THEN 应用程序 SHALL 正确映射到内部数据结构
3. WHEN 移除nikoPath后 THEN niko相关功能 SHALL 通过程序逻辑正确处理路径

### 需求 6: 本地化工具配置同步

**用户故事:** 作为用户，我希望localizer工具的配置也进行相应的本地化，保持整个项目的一致性。

#### 验收标准

1. WHEN localizer配置被更新时 THEN 配置 SHALL 使用YAML格式
2. WHEN localizer配置字段被本地化时 THEN 字段名称 SHALL 使用中文
3. THE localizer配置 SHALL 支持以下字段映射：
   - base_path → 基础路径
   - proxy → 代理地址
   - force_proxy_list → 强制代理列表